(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(14),o=n.n(r),u=n(4),l=n(2),i=n(3),m=n.n(i),s="/api/persons",f=function(){return m.a.get(s).then((function(e){return e.data}))},d=function(e){return m.a.post(s,e).then((function(e){return e.data}))},b=function(e){return m.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(s,"/").concat(e))},p=function(e){var t=e.message,n=e.errorMessage;return c.a.createElement(c.a.Fragment,null,n?c.a.createElement("div",{className:"error"},n):"",t?c.a.createElement("div",{className:"notification"},t):"")},E=function(e){var t=e.filterName,n=e.setFilterName;return c.a.createElement("div",null,"Filter by name: ",c.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))},v=function(e){var t=e.createPerson,n=e.newName,a=e.setNewName,r=e.newNumber,o=e.setNewNumber;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"New Entry"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({name:n,number:r})}},c.a.createElement("div",null,"Name: ",c.a.createElement("input",{value:n,onChange:function(e){return a(e.target.value)}})),c.a.createElement("div",null,"Number: ",c.a.createElement("input",{value:r,onChange:function(e){return o(e.target.value)}})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Add"))))},g=function(e){var t=e.person,n=e.deletePerson;return c.a.createElement("div",null,t.name,": ",t.number," ",c.a.createElement("button",{onClick:function(){return n(t)}},"Delete"))},N=function(e){var t=e.persons,n=e.deletePerson;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Numbers"),t.map((function(e){return c.a.createElement(g,{key:e.id,person:e,deletePerson:n})})))},w=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),m=i[0],s=i[1],g=Object(a.useState)(""),w=Object(l.a)(g,2),j=w[0],O=w[1],P=Object(a.useState)(""),S=Object(l.a)(P,2),y=S[0],k=S[1],F=Object(a.useState)(""),C=Object(l.a)(F,2),D=C[0],T=C[1],x=Object(a.useState)(""),M=Object(l.a)(x,2),A=M[0],J=M[1],B=Object(a.useState)(""),I=Object(l.a)(B,2),L=I[0],R=I[1],U=Object(a.useState)(""),q=Object(l.a)(U,2),z=q[0],G=q[1];Object(a.useEffect)((function(){Q()}),[]);var H=function(e){R(e),clearTimeout(z),G(setTimeout((function(){R("")}),5e3))},K=function(e){T(e),clearTimeout(A),J(setTimeout((function(){T("")}),5e3))},Q=function(){f().then((function(e){return r(e)})).catch((function(e){console.log("failed",e)}))},V=function(e){b(e).then((function(e){r(n.map((function(t){return t.id===e.id?e:t}))),O(""),k(""),K("Updated ".concat(e.name))})).catch((function(t){console.log("failed",t),H("Person ".concat(e.name," update failed."))}))},W=0===m.length?n:n.filter((function(e){return e.name.toLowerCase().match(new RegExp(m))}));return c.a.createElement("div",null,c.a.createElement("h1",null,"Phonebook"),c.a.createElement(p,{message:D,errorMessage:L}),c.a.createElement(E,{filterName:m,setFilterName:s}),c.a.createElement(v,{createPerson:function(e){var t=n.filter((function(t){return t.name===e.name}));if(t.length>1)H('Multiple duplicate persons with name "'.concat(e.name,'" found, please fix.'));else if(1!==t.length)d(e).then((function(e){r(n.concat(e)),O(""),k(""),K("Added ".concat(e.name))})).catch((function(t){console.log("failed",t),H("Person ".concat(e.name," creation failed."))}));else{var a=t[0],c='"'.concat(a.name,'" is already added to the phonebook. ')+"Do you want to replace the old number ".concat(a.number," with ").concat(e.number,"?");window.confirm(c)&&V(Object(u.a)(Object(u.a)({},a),e))}},newName:j,setNewName:O,newNumber:y,setNewNumber:k}),c.a.createElement(N,{persons:W,deletePerson:function(e){window.confirm('Delete "'.concat(e.name,'"'))&&h(e.id).then((function(t){r(n.filter((function(t){return t.id!==e.id}))),K("Deleted ".concat(e.name))})).catch((function(t){console.log("failed",t),H("Person ".concat(e.name," deletion failed."))}))}}))};n(37);o.a.render(c.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f04c3e47.chunk.js.map