{"version":3,"sources":["services/persons.js","components/Notification.js","components/Filter.js","components/AddPerson.js","components/Person.js","components/Persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","updatedPerson","put","id","delete","Notification","message","errorMessage","className","Filter","filterName","setFilterName","value","onChange","event","target","AddPerson","createPerson","newName","setNewName","newNumber","setNewNumber","onSubmit","preventDefault","name","number","type","Person","person","deletePerson","onClick","Persons","persons","map","key","App","useState","setPersons","setMessage","messageTimeout","setMessageTimeout","setErrorMessage","errorMessageTimeout","setErrorMessageTimeout","useEffect","reload","showErrorMessage","clearTimeout","setTimeout","showMessage","personService","returnedPersons","catch","error","console","log","updatePerson","returnedPerson","oldperson","filteredPersons","length","filter","toLowerCase","match","RegExp","duplicates","concat","x","duplicate","confirmMessage","window","confirm","targetPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d53d7c67.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => axios.get(baseUrl).then((response) => response.data);\n\nconst create = (newPerson) =>\n  axios.post(baseUrl, newPerson).then((response) => response.data);\n\nconst update = (updatedPerson) =>\n  axios\n    .put(`${baseUrl}/${updatedPerson.id}`, updatedPerson)\n    .then((response) => response.data);\n\nconst remove = (id) => axios.delete(`${baseUrl}/${id}`);\n\nexport default { getAll, create, update, remove };\n","import React from \"react\";\n\nconst Notification = ({ message, errorMessage }) => {\n  return (\n    <>\n      {errorMessage ? <div className=\"error\">{errorMessage}</div> : \"\"}\n      {message ? <div className=\"notification\">{message}</div> : \"\"}\n    </>\n  );\n};\n\nexport default Notification;\n","import React from \"react\";\n\nconst Filter = ({ filterName, setFilterName }) => {\n  const handleFilterNameChange = (event) => setFilterName(event.target.value);\n  return (\n    <div>\n      Filter by name: <input value={filterName} onChange={handleFilterNameChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst AddPerson = ({\n  createPerson,\n  newName,\n  setNewName,\n  newNumber,\n  setNewNumber,\n}) => {\n  const handleAddPerson = (event) => {\n    event.preventDefault();\n    createPerson({\n      name: newName,\n      number: newNumber,\n    });\n  };\n  const handleNameChange = (event) => setNewName(event.target.value);\n  const handleNumberChange = (event) => setNewNumber(event.target.value);\n  return (\n    <>\n      <h2>New Entry</h2>\n      <form onSubmit={handleAddPerson}>\n        <div>\n          Name: <input value={newName} onChange={handleNameChange} />\n        </div>\n        <div>\n          Number: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">Add</button>\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default AddPerson;\n","import React from \"react\";\n\nconst Person = ({ person, deletePerson }) => {\n  return (\n    <div>\n      {person.name}: {person.number}{\" \"}\n      <button onClick={() => deletePerson(person)}>Delete</button>\n    </div>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ persons ,deletePerson}) => (\n  <>\n    <h2>Numbers</h2>\n    {persons.map((person) => (\n      <Person key={person.id} person={person} deletePerson={deletePerson} />\n    ))}\n  </>\n);\n\nexport default Persons;\n","import React, { useState, useEffect } from \"react\";\n\nimport personService from \"./services/persons\";\n\nimport Notification from \"./components/Notification\";\nimport Filter from \"./components/Filter\";\nimport AddPerson from \"./components/AddPerson\";\nimport Persons from \"./components/Persons\";\n\nconst MESSAGE_DURATION = 5000;\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filterName, setFilterName] = useState(\"\");\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [messageTimeout, setMessageTimeout] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [errorMessageTimeout, setErrorMessageTimeout] = useState(\"\");\n\n  useEffect(() => {\n    reload();\n  }, []);\n\n  const showErrorMessage = (errorMessage) => {\n    setErrorMessage(errorMessage);\n    clearTimeout(errorMessageTimeout);\n    setErrorMessageTimeout(\n      setTimeout(() => {\n        setErrorMessage(\"\");\n      }, MESSAGE_DURATION)\n    );\n  };\n  const showMessage = (message) => {\n    setMessage(message);\n    clearTimeout(messageTimeout);\n    setMessageTimeout(\n      setTimeout(() => {\n        setMessage(\"\");\n      }, MESSAGE_DURATION)\n    );\n  };\n\n  const reload = () => {\n    personService\n      .getAll()\n      .then((returnedPersons) => setPersons(returnedPersons))\n      .catch((error) => {\n        console.log(\"failed\", error);\n      });\n  };\n  const createPerson = (newPerson) => {\n    const duplicates = persons.filter(\n      (person) => person.name === newPerson.name\n    );\n    if (duplicates.length > 1) {\n      showErrorMessage(\n        `Multiple duplicate persons with name \"${newPerson.name}\" found, please fix.`\n      );\n      return;\n    }\n    if (duplicates.length === 1) {\n      const duplicate = duplicates[0];\n      const confirmMessage =\n        `\"${duplicate.name}\" is already added to the phonebook. ` +\n        `Do you want to replace the old number ${duplicate.number} with ${newPerson.number}?`;\n      if (window.confirm(confirmMessage)) {\n        updatePerson({ ...duplicate, ...newPerson });\n      }\n      return;\n    }\n\n    personService\n      .create(newPerson)\n      .then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        showMessage(`Added ${returnedPerson.name}`);\n      })\n      .catch((error, x) => {\n        console.log(\"failed\", error.response);\n        showErrorMessage(\n          `Person ${newPerson.name} creation failed: ${error.response.data.error}`\n        );\n      });\n  };\n  const updatePerson = (updatedPerson) => {\n    personService\n      .update(updatedPerson)\n      .then((returnedPerson) => {\n        setPersons(\n          persons.map((oldperson) =>\n            oldperson.id === returnedPerson.id ? returnedPerson : oldperson\n          )\n        );\n        setNewName(\"\");\n        setNewNumber(\"\");\n        showMessage(`Updated ${returnedPerson.name}`);\n      })\n      .catch((error) => {\n        console.log(\"failed\", error.response.data);\n        showErrorMessage(\n          `Person ${updatedPerson.name} update failed: ${error.response.data.error}`\n        );\n      });\n  };\n  const deletePerson = (targetPerson) => {\n    if (!window.confirm(`Delete \"${targetPerson.name}\"`)) {\n      return;\n    }\n    personService\n      .remove(targetPerson.id)\n      .then((response) => {\n        setPersons(persons.filter((person) => person.id !== targetPerson.id));\n        showMessage(`Deleted ${targetPerson.name}`);\n      })\n      .catch((error) => {\n        console.log(\"failed\", error);\n        showErrorMessage(`Person ${targetPerson.name} deletion failed.`);\n      });\n  };\n\n  const filteredPersons =\n    filterName.length === 0\n      ? persons\n      : persons.filter((person) =>\n          person.name.toLowerCase().match(new RegExp(filterName))\n        );\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message} errorMessage={errorMessage} />\n      <Filter filterName={filterName} setFilterName={setFilterName} />\n      <AddPerson\n        createPerson={createPerson}\n        newName={newName}\n        setNewName={setNewName}\n        newNumber={newNumber}\n        setNewNumber={setNewNumber}\n      />\n      <Persons persons={filteredPersons} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}